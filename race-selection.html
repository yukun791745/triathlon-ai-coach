<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Triathlon AI Coach - ãƒ¬ãƒ¼ã‚¹é¸æŠ</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: linear-gradient(135deg, #dbeafe 0%, #fff 50%, #cffafe 100%); min-height: 100vh; display: flex; }
        .navbar { position: fixed; top: 0; left: 0; bottom: 0; width: 220px; background: linear-gradient(180deg, #667eea, #764ba2); padding: 20px 0; z-index: 1000; }
        .nav-logo { font-size: 1.1rem; font-weight: 700; color: white; text-align: center; padding: 0 15px 25px; border-bottom: 2px solid rgba(255,255,255,0.2); margin-bottom: 15px; }
        .nav-steps { display: flex; flex-direction: column; gap: 6px; padding: 0 12px; }
        .nav-step { display: flex; align-items: center; gap: 10px; padding: 10px 14px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; text-decoration: none; color: rgba(255,255,255,0.8); transition: all 0.2s; }
        .nav-step:hover { background: rgba(255,255,255,0.15); color: white; }
        .nav-step.current { background: rgba(255,255,255,0.25); color: white; }
        .content { margin-left: 220px; flex: 1; padding: 16px; }
        .container { max-width: 1100px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 12px; }
        .title { font-size: 22px; font-weight: bold; color: #1f2937; }
        .subtitle { font-size: 11px; color: #6b7280; margin-top: 2px; }
        .stats-bar { display: flex; justify-content: center; gap: 12px; margin-bottom: 10px; background: white; padding: 8px 14px; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); }
        .stat { text-align: center; }
        .stat-num { font-size: 16px; font-weight: bold; color: #2563eb; }
        .stat-label { font-size: 9px; color: #6b7280; }
        .status-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; padding: 6px 12px; background: #f0fdf4; border-radius: 6px; font-size: 10px; color: #166534; }
        .status-bar.warning { background: #fefce8; color: #854d0e; }
        .status-bar.error { background: #fef2f2; color: #991b1b; }
        .selection-bar { background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 8px; padding: 8px 14px; margin-bottom: 10px; display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }
        .sel-title { font-size: 11px; font-weight: 600; }
        .sel-stat { display: flex; align-items: center; gap: 3px; }
        .sel-num { font-size: 14px; font-weight: bold; }
        .sel-label { font-size: 9px; opacity: 0.9; }
        .goal-btn { background: white; color: #d97706; border: none; padding: 6px 12px; border-radius: 5px; font-weight: 600; cursor: pointer; font-size: 10px; margin-left: auto; }
        .goal-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .filters { background: white; border-radius: 8px; padding: 8px 12px; margin-bottom: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.08); display: flex; gap: 6px; flex-wrap: wrap; align-items: center; }
        .filter-group { display: flex; align-items: center; gap: 3px; }
        .filter-label { font-size: 9px; color: #6b7280; }
        .filter-input, .filter-select { padding: 4px 6px; border: 1px solid #d1d5db; border-radius: 4px; font-size: 10px; }
        .filter-input { width: 120px; }
        .filter-select { min-width: 70px; }
        .refresh-btn { padding: 4px 8px; background: #3b82f6; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 10px; }
        .refresh-btn:disabled { opacity: 0.5; }
        .result-count { margin-left: auto; font-size: 10px; color: #6b7280; }
        .table-wrap { background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.08); max-height: calc(100vh - 280px); overflow-y: auto; }
        .table-header { display: grid; grid-template-columns: 55px 80px 1fr 110px 65px 70px; gap: 4px; padding: 6px 10px; background: #f1f5f9; font-size: 9px; font-weight: 600; color: #64748b; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; }
        .table-row { display: grid; grid-template-columns: 55px 80px 1fr 110px 65px 70px; gap: 4px; padding: 5px 10px; border-bottom: 1px solid #f1f5f9; align-items: center; font-size: 10px; transition: background 0.15s; }
        .table-row:hover { background: #f8fafc; }
        .table-row.sel-a { background: #fffbeb; }
        .table-row.sel-o { background: #f5f3ff; }
        .sel-radios { display: flex; gap: 4px; }
        .sel-radios label { display: flex; align-items: center; gap: 1px; cursor: pointer; font-size: 8px; color: #666; }
        .sel-radios input { cursor: pointer; width: 11px; height: 11px; }
        .race-date { color: #374151; font-weight: 500; font-size: 10px; }
        .race-name { color: #1e40af; text-decoration: none; font-weight: 500; font-size: 11px; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .race-name:hover { text-decoration: underline; }
        .race-loc { color: #6b7280; font-size: 9px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .race-dist { font-size: 8px; padding: 1px 5px; border-radius: 6px; background: #dbeafe; color: #1e40af; text-align: center; white-space: nowrap; }
        .race-cat { font-size: 8px; padding: 1px 4px; border-radius: 3px; background: #f3f4f6; color: #4b5563; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .empty { text-align: center; padding: 30px; color: #9ca3af; }
        .loading { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 9999; }
        .spinner { width: 32px; height: 32px; border: 3px solid #e5e7eb; border-top-color: #3b82f6; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        .loading-text { margin-top: 8px; font-size: 12px; color: #6b7280; }
        @media (max-width: 900px) {
            .table-header, .table-row { grid-template-columns: 45px 70px 1fr 55px; }
            .table-header > :nth-child(4), .table-row > :nth-child(4) { display: none; }
            .table-header > :nth-child(6), .table-row > :nth-child(6) { display: none; }
        }
        @media (max-width: 768px) {
            .navbar { width: 100%; height: 45px; bottom: auto; padding: 8px; }
            .nav-logo { padding: 0 10px; margin: 0; border: none; font-size: 0.9rem; }
            .nav-steps { display: none; }
            .content { margin-left: 0; padding: 8px; padding-top: 55px; }
            .table-wrap { max-height: calc(100vh - 320px); }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-logo">AI Triathlon Coach</div>
        <div class="nav-steps">
            <a href="home.html" class="nav-step">ğŸ  ãƒ›ãƒ¼ãƒ </a>
            <a href="news.html" class="nav-step">ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹</a>
            <a href="race-selection.html" class="nav-step current">ğŸ¯ ãƒ¬ãƒ¼ã‚¹é¸æŠ</a>
            <a href="goal-setting.html" class="nav-step">ğŸ† ç›®æ¨™è¨­å®š</a>
            <a href="training-plan.html" class="nav-step">ğŸ“‹ è¨ˆç”»</a>
            <a href="simulator.html" class="nav-step">ğŸ”¬ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</a>
            <a href="data.html" class="nav-step">ğŸ“Š é€²æ—</a>
        </div>
    </nav>
    <div id="loading" class="loading"><div class="spinner"></div><div class="loading-text">ãƒ¬ãƒ¼ã‚¹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ä¸­...</div></div>
    <div class="content">
        <div class="container">
            <div class="header">
                <h1 class="title">ğŸ¯ ãƒ¬ãƒ¼ã‚¹é¸æŠ</h1>
                <p class="subtitle">ç›®æ¨™ãƒ¬ãƒ¼ã‚¹ã‚’é¸ã‚“ã§ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°è¨ˆç”»ã‚’ç«‹ã¦ã¾ã—ã‚‡ã†</p>
            </div>
            <div class="stats-bar">
                <div class="stat"><div class="stat-num" id="total-count">0</div><div class="stat-label">å…¨å¤§ä¼š</div></div>
                <div class="stat"><div class="stat-num" id="japan-count">0</div><div class="stat-label">å›½å†…</div></div>
                <div class="stat"><div class="stat-num" id="overseas-count">0</div><div class="stat-label">æµ·å¤–</div></div>
                <div class="stat"><div class="stat-num" id="filtered-count">0</div><div class="stat-label">è¡¨ç¤ºä¸­</div></div>
            </div>
            <div class="status-bar" id="status-bar">
                <span id="status-text">ãƒ‡ãƒ¼ã‚¿å–å¾—ä¸­...</span>
                <span id="last-updated"></span>
            </div>
            <div class="selection-bar">
                <div class="sel-title">ğŸ“Œ é¸æŠä¸­</div>
                <div class="sel-stat"><span class="sel-num" id="a-count">0</span><span class="sel-label">ğŸ†A</span></div>
                <div class="sel-stat"><span class="sel-num" id="o-count">0</span><span class="sel-label">ğŸªä»–</span></div>
                <button class="goal-btn" id="goal-btn" disabled onclick="goToGoal()">ç›®æ¨™è¨­å®šã¸ â†’</button>
            </div>
            <div class="filters">
                <div class="filter-group"><span class="filter-label">æ¤œç´¢</span><input type="text" class="filter-input" id="f-search" placeholder="å¤§ä¼šåãƒ»å ´æ‰€..."></div>
                <div class="filter-group"><span class="filter-label">åœ°åŸŸ</span><select class="filter-select" id="f-region"><option value="">å…¨ã¦</option><option value="japan">å›½å†…</option><option value="overseas">æµ·å¤–</option></select></div>
                <div class="filter-group"><span class="filter-label">è·é›¢</span><select class="filter-select" id="f-dist"><option value="">å…¨ã¦</option><option value="ã‚¹ãƒ—ãƒªãƒ³ãƒˆ">ã‚¹ãƒ—ãƒªãƒ³ãƒˆ</option><option value="ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰">ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰</option><option value="ãƒŸãƒ‰ãƒ«">ãƒŸãƒ‰ãƒ«</option><option value="ãƒ­ãƒ³ã‚°">ãƒ­ãƒ³ã‚°</option></select></div>
                <div class="filter-group"><span class="filter-label">æœˆ</span><select class="filter-select" id="f-month"><option value="">å…¨ã¦</option><option value="01">1æœˆ</option><option value="02">2æœˆ</option><option value="03">3æœˆ</option><option value="04">4æœˆ</option><option value="05">5æœˆ</option><option value="06">6æœˆ</option><option value="07">7æœˆ</option><option value="08">8æœˆ</option><option value="09">9æœˆ</option><option value="10">10æœˆ</option><option value="11">11æœˆ</option><option value="12">12æœˆ</option></select></div>
                <button class="refresh-btn" id="refresh-btn" onclick="refreshData()">ğŸ”„ æ›´æ–°</button>
                <div class="result-count" id="result-count">0ä»¶</div>
            </div>
            <div class="table-wrap">
                <div class="table-header"><div>é¸æŠ</div><div>é–‹å‚¬æ—¥</div><div>å¤§ä¼šå</div><div>é–‹å‚¬åœ°</div><div>è·é›¢</div><div>ã‚«ãƒ†ã‚´ãƒª</div></div>
                <div id="races"></div>
            </div>
        </div>
    </div>
<script>
// é™çš„ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ç”¨ï¼‰
const STATIC_RACES = [
    // JTU å›½å†…ä¸»è¦å¤§ä¼š
    {id:'s1',name:'çŸ³å£å³¶ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³å¤§ä¼š',date:'2026-04-12',loc:'æ²–ç¸„çœŒçŸ³å£å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/78271/'},
    {id:'s2',name:'å…¨æ—¥æœ¬ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³å®®å¤å³¶å¤§ä¼š',date:'2026-04-19',loc:'æ²–ç¸„çœŒå®®å¤å³¶å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTUä¸»è¦',url:'https://tri-miyako.com/'},
    {id:'s3',name:'ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³CSæ¨ªæµœ',date:'2026-05-16',loc:'ç¥å¥ˆå·çœŒæ¨ªæµœå¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'WTS',url:'https://www.jtu.or.jp/event/77637/'},
    {id:'s4',name:'ã‚¢ã‚¸ã‚¢ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³ã‚«ãƒƒãƒ—å¤§é˜ªåŸ',date:'2026-05-31',loc:'å¤§é˜ªåºœå¤§é˜ªå¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'ã‚¢ã‚¸ã‚¢',url:'https://www.jtu.or.jp/event/79177/'},
    {id:'s5',name:'é¤¨å±±ã‚ã‹ã—ãŠãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-06-07',loc:'åƒè‘‰çœŒé¤¨å±±å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s6',name:'äº”å³¶é•·å´å›½éš›ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-06-14',loc:'é•·å´çœŒäº”å³¶å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s7',name:'IRONMAN 70.3 ã‚»ãƒ³ãƒˆãƒ¬ã‚¢çŸ¥å¤šåŠå³¶',date:'2026-06-14',loc:'æ„›çŸ¥çœŒå¸¸æ»‘å¸‚',country:'æ—¥æœ¬',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s8',name:'è’²éƒ¡ã‚ªãƒ¬ãƒ³ã‚¸ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-06-21',loc:'æ„›çŸ¥çœŒè’²éƒ¡å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s9',name:'é‡å°»æ¹–ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-06-28',loc:'é•·é‡çœŒä¿¡æ¿ƒç”º',country:'æ—¥æœ¬',dist:'ãƒŸãƒ‰ãƒ«',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s10',name:'æ¦›åæ¹–ãƒªã‚¾ãƒ¼ãƒˆãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-07-05',loc:'ç¾¤é¦¬çœŒé«˜å´å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s11',name:'ã¿ãªã¨é…’ç”°ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³ãŠã—ã‚“',date:'2026-07-12',loc:'å±±å½¢çœŒé…’ç”°å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s12',name:'æ—¥æœ¬ã‚¢ã‚¯ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© æµ·ã®æ£®',date:'2026-07-12',loc:'æ±äº¬éƒ½æ±Ÿæ±åŒº',country:'æ—¥æœ¬',dist:'ã‚¢ã‚¯ã‚¢ã‚¹ãƒ­ãƒ³',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79192/'},
    {id:'s13',name:'çš†ç”Ÿãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-07-19',loc:'é³¥å–çœŒç±³å­å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s14',name:'ä¹åä¹é‡Œãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-07-19',loc:'åƒè‘‰çœŒä¹åä¹é‡Œç”º',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s15',name:'é•·è‰¯å·å›½éš›ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-07-26',loc:'å²é˜œçœŒæµ·æ´¥å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/'},
    {id:'s16',name:'ã†ã¤ãã—ã¾ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³inã‚ã„ã¥',date:'2026-08-02',loc:'ç¦å³¶çœŒçŒªè‹—ä»£ç”º',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s17',name:'å…¨å›½é«˜ç­‰å­¦æ ¡ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨©',date:'2026-08-23',loc:'ç¦å³¶çœŒã„ã‚ãå¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79202/'},
    {id:'s18',name:'ç æ´²ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-08-23',loc:'çŸ³å·çœŒç æ´²å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s19',name:'ä½æ¸¡å›½éš›ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³å¤§ä¼š Aã‚¿ã‚¤ãƒ—',date:'2026-09-06',loc:'æ–°æ½ŸçœŒä½æ¸¡å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.scsf.jp/'},
    {id:'s20',name:'ä½æ¸¡å›½éš›ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³å¤§ä¼š Bã‚¿ã‚¤ãƒ—',date:'2026-09-06',loc:'æ–°æ½ŸçœŒä½æ¸¡å¸‚',country:'æ—¥æœ¬',dist:'ãƒŸãƒ‰ãƒ«',cat:'JTU/NCS',url:'https://www.scsf.jp/'},
    {id:'s21',name:'IRONMAN Japan ã¿ãªã¿åŒ—æµ·é“',date:'2026-09-13',loc:'åŒ—æµ·é“åŒ—æ–—å¸‚',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/im-japan'},
    {id:'s22',name:'å¤©è‰å®å³¶å›½éš›ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-09-13',loc:'ç†Šæœ¬çœŒå¤©è‰å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s23',name:'é’æ£®å›½æ°‘ã‚¹ãƒãƒ¼ãƒ„å¤§ä¼š',date:'2026-09-13',loc:'é’æ£®çœŒé’æ£®å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'å›½ã‚¹ãƒ',url:'https://www.jtu.or.jp/event/79188/'},
    {id:'s24',name:'ã‚¢ã‚¸ã‚¢ç«¶æŠ€å¤§ä¼šãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-09-20',loc:'æ„›çŸ¥çœŒè’²éƒ¡å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'ã‚¢ã‚¸ã‚¢å¤§ä¼š',url:'https://www.jtu.or.jp/event/79174/'},
    {id:'s25',name:'æ‘ä¸Šç¬¹å·æµã‚Œãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³',date:'2026-09-20',loc:'æ–°æ½ŸçœŒæ‘ä¸Šå¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s26',name:'æ—¥æœ¬ã‚¹ãƒ—ãƒªãƒ³ãƒˆãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© å®®å´',date:'2026-09-27',loc:'å®®å´çœŒå®®å´å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ãƒ—ãƒªãƒ³ãƒˆ',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79205/'},
    {id:'s27',name:'ã³ã‚æ¹–ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³inè¿‘æ±Ÿå…«å¹¡',date:'2026-09-27',loc:'æ»‹è³€çœŒè¿‘æ±Ÿå…«å¹¡å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTU/NCS',url:'https://www.jtu.or.jp/event/'},
    {id:'s28',name:'WTãƒ‘ãƒ©ã‚«ãƒƒãƒ—åƒè‘‰',date:'2026-10-12',loc:'åƒè‘‰çœŒåƒè‘‰å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'WT Para',url:'https://www.jtu.or.jp/event/79184/'},
    {id:'s29',name:'æ—¥æœ¬SSPãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© æµ·ã®æ£®',date:'2026-10-17',loc:'æ±äº¬éƒ½æ±Ÿæ±åŒº',country:'æ—¥æœ¬',dist:'ã‚¹ãƒ¼ãƒ‘ãƒ¼ã‚¹ãƒ—ãƒªãƒ³ãƒˆ',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79207/'},
    {id:'s30',name:'æ—¥æœ¬ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© å°å ´',date:'2026-11-01',loc:'æ±äº¬éƒ½æ¸¯åŒº',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79210/'},
    {id:'s31',name:'ãƒ¯ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³ã‚«ãƒƒãƒ—å®®å´',date:'2026-11-15',loc:'å®®å´çœŒå®®å´å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'WT Cup',url:'https://www.jtu.or.jp/event/79186/'},
    {id:'s32',name:'æ—¥æœ¬ã‚¨ã‚¤ã‚¸SD/SPãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© å®®å´',date:'2026-11-15',loc:'å®®å´çœŒå®®å´å¸‚',country:'æ—¥æœ¬',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79213/'},
    {id:'s33',name:'æ—¥æœ¬ã‚¨ã‚¤ã‚¸LDãƒˆãƒ©ã‚¤ã‚¢ã‚¹ãƒ­ãƒ³é¸æ‰‹æ¨© æ²–ç¸„',date:'2026-11-22',loc:'æ²–ç¸„çœŒé‡‘æ­¦ç”º',country:'æ—¥æœ¬',dist:'ãƒ­ãƒ³ã‚°',cat:'JTUé¸æ‰‹æ¨©',url:'https://www.jtu.or.jp/event/79215/'},
    {id:'s34',name:'XTERRA Japan',date:'2026-05-16',loc:'é•·é‡çœŒ',country:'æ—¥æœ¬',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA',url:'https://www.xterrajapan.com/'},
    // æµ·å¤– IRONMAN
    {id:'s40',name:'IRONMAN 70.3 Colombo',date:'2026-02-22',loc:'ã‚³ãƒ­ãƒ³ãƒœ',country:'ã‚¹ãƒªãƒ©ãƒ³ã‚«',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s41',name:'IRONMAN New Zealand',date:'2026-03-07',loc:'ã‚¿ã‚¦ãƒ',country:'ãƒ‹ãƒ¥ãƒ¼ã‚¸ãƒ¼ãƒ©ãƒ³ãƒ‰',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s42',name:'IRONMAN 70.3 Davao',date:'2026-03-22',loc:'ãƒ€ãƒã‚ª',country:'ãƒ•ã‚£ãƒªãƒ”ãƒ³',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s43',name:'IRONMAN 70.3 Geelong',date:'2026-03-22',loc:'ã‚¸ãƒ¼ãƒ­ãƒ³ã‚°',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s44',name:'IRONMAN 70.3 Taiwan',date:'2026-04-12',loc:'å°æ±',country:'å°æ¹¾',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s45',name:'IRONMAN Texas',date:'2026-04-18',loc:'ãƒ†ã‚­ã‚µã‚¹',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s46',name:'IRONMAN 70.3 Vietnam',date:'2026-05-10',loc:'ãƒ€ãƒŠãƒ³',country:'ãƒ™ãƒˆãƒŠãƒ ',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s47',name:'IRONMAN Hamburg',date:'2026-06-07',loc:'ãƒãƒ³ãƒ–ãƒ«ã‚¯',country:'ãƒ‰ã‚¤ãƒ„',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN EU',url:'https://www.ironman.com/'},
    {id:'s48',name:'IRONMAN 70.3 Cairns',date:'2026-06-14',loc:'ã‚±ã‚¢ãƒ³ã‚º',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s49',name:'IRONMAN Cairns',date:'2026-06-14',loc:'ã‚±ã‚¢ãƒ³ã‚º',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN AP',url:'https://www.ironman.com/'},
    {id:'s50',name:'IRONMAN 70.3 Goseong',date:'2026-06-14',loc:'é«˜åŸ',country:'éŸ“å›½',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN 70.3',url:'https://www.ironman.com/'},
    {id:'s51',name:'IRONMAN Frankfurt',date:'2026-06-28',loc:'ãƒ•ãƒ©ãƒ³ã‚¯ãƒ•ãƒ«ãƒˆ',country:'ãƒ‰ã‚¤ãƒ„',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN EU',url:'https://www.ironman.com/'},
    {id:'s52',name:'IRONMAN Canada Whistler',date:'2026-07-26',loc:'ã‚¦ã‚£ã‚¹ãƒ©ãƒ¼',country:'ã‚«ãƒŠãƒ€',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s53',name:'IRONMAN Lake Placid',date:'2026-07-26',loc:'ãƒ¬ã‚¤ã‚¯ãƒ—ãƒ©ã‚·ãƒƒãƒ‰',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s54',name:'IRONMAN Kalmar',date:'2026-08-15',loc:'ã‚«ãƒ«ãƒãƒ«',country:'ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s55',name:'IRONMAN Vichy',date:'2026-08-30',loc:'ãƒ´ã‚£ã‚·ãƒ¼',country:'ãƒ•ãƒ©ãƒ³ã‚¹',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s56',name:'IRONMAN Nice',date:'2026-09-06',loc:'ãƒ‹ãƒ¼ã‚¹',country:'ãƒ•ãƒ©ãƒ³ã‚¹',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN WC',url:'https://www.ironman.com/'},
    {id:'s57',name:'IRONMAN Wales',date:'2026-09-13',loc:'ãƒ†ãƒ³ãƒ“ãƒ¼',country:'ã‚¤ã‚®ãƒªã‚¹',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s58',name:'IRONMAN Italy Emilia-Romagna',date:'2026-09-19',loc:'ã‚¨ãƒŸãƒªã‚¢ãƒ­ãƒãƒ¼ãƒ‹ãƒ£',country:'ã‚¤ã‚¿ãƒªã‚¢',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN EU',url:'https://www.ironman.com/'},
    {id:'s59',name:'IRONMAN 70.3 World Championship',date:'2026-09-20',loc:'ã‚¿ã‚¹ãƒãƒ‹ã‚¢',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'IRONMAN WC',url:'https://www.ironman.com/'},
    {id:'s60',name:'IRONMAN World Championship',date:'2026-10-10',loc:'ã‚³ãƒŠ',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN WC',url:'https://www.ironman.com/'},
    {id:'s61',name:'IRONMAN Cozumel',date:'2026-11-22',loc:'ã‚³ã‚¹ãƒ¡ãƒ«',country:'ãƒ¡ã‚­ã‚·ã‚³',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN',url:'https://www.ironman.com/'},
    {id:'s62',name:'IRONMAN Western Australia',date:'2026-12-06',loc:'ãƒãƒƒã‚»ãƒ«ãƒˆãƒ³',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒ­ãƒ³ã‚°',cat:'IRONMAN AP',url:'https://www.ironman.com/'},
    // Challenge
    {id:'s70',name:'Challenge Wanaka',date:'2026-02-21',loc:'ãƒ¯ãƒŠã‚«',country:'ãƒ‹ãƒ¥ãƒ¼ã‚¸ãƒ¼ãƒ©ãƒ³ãƒ‰',dist:'ãƒ­ãƒ³ã‚°',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s71',name:'Challenge Taiwan',date:'2026-04-26',loc:'å°æ±',country:'å°æ¹¾',dist:'ãƒ­ãƒ³ã‚°',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s72',name:'Challenge St. PÃ¶lten',date:'2026-05-31',loc:'ã‚µãƒ³ã‚¯ãƒˆãƒšãƒ«ãƒ†ãƒ³',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s73',name:'Challenge Gdansk',date:'2026-06-07',loc:'ã‚°ãƒ€ãƒ‹ã‚¹ã‚¯',country:'ãƒãƒ¼ãƒ©ãƒ³ãƒ‰',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s74',name:'Challenge Kaiserwinkl-Walchsee',date:'2026-06-14',loc:'ãƒ´ã‚¡ãƒ«ãƒ’ã‚¼ãƒ¼',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s75',name:'Challenge Roth',date:'2026-07-05',loc:'ãƒ­ãƒ¼ãƒˆ',country:'ãƒ‰ã‚¤ãƒ„',dist:'ãƒ­ãƒ³ã‚°',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s76',name:'Challenge Geraardsbergen',date:'2026-07-12',loc:'ãƒ™ãƒ«ã‚®ãƒ¼',country:'ãƒ™ãƒ«ã‚®ãƒ¼',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s77',name:'Challenge Turku',date:'2026-08-01',loc:'ãƒˆã‚¥ãƒ«ã‚¯',country:'ãƒ•ã‚£ãƒ³ãƒ©ãƒ³ãƒ‰',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s78',name:'Challenge Vietnam',date:'2026-08-02',loc:'ãƒ‹ãƒ£ãƒãƒ£ãƒ³',country:'ãƒ™ãƒˆãƒŠãƒ ',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s79',name:'Challenge Gunsan-Saemangeum',date:'2026-08-17',loc:'ç¾¤å±±',country:'éŸ“å›½',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s80',name:'Challenge Malaysia',date:'2026-08-23',loc:'ãƒ•ã‚©ãƒ¬ã‚¹ãƒˆã‚·ãƒ†ã‚£',country:'ãƒãƒ¬ãƒ¼ã‚·ã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s81',name:'Challenge Samarkand',date:'2026-08-24',loc:'ã‚µãƒãƒ«ã‚«ãƒ³ãƒ‰',country:'ã‚¦ã‚ºãƒ™ã‚­ã‚¹ã‚¿ãƒ³',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s82',name:'Challenge Almere-Amsterdam',date:'2026-09-12',loc:'ã‚¢ãƒ«ãƒ¡ãƒ¼ãƒ¬',country:'ã‚ªãƒ©ãƒ³ãƒ€',dist:'ãƒ­ãƒ³ã‚°',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s83',name:'Challenge Sanremo',date:'2026-09-20',loc:'ã‚µãƒ³ãƒ¬ãƒ¢',country:'ã‚¤ã‚¿ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s84',name:'Challenge Barcelona',date:'2026-10-04',loc:'ãƒãƒ«ã‚»ãƒ­ãƒŠ',country:'ã‚¹ãƒšã‚¤ãƒ³',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s85',name:'Challenge Peguera-Mallorca',date:'2026-10-11',loc:'ãƒãƒ¨ãƒ«ã‚«',country:'ã‚¹ãƒšã‚¤ãƒ³',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s86',name:'Challenge Sardinia',date:'2026-10-18',loc:'ã‚µãƒ«ãƒ‡ãƒ¼ãƒ‹ãƒ£',country:'ã‚¤ã‚¿ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    {id:'s87',name:'Challenge Canberra',date:'2026-11-22',loc:'ã‚­ãƒ£ãƒ³ãƒ™ãƒ©',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'Challenge',url:'https://challengefamily.com/'},
    // T100
    {id:'s90',name:'T100 Singapore',date:'2026-02-28',loc:'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«',country:'ã‚·ãƒ³ã‚¬ãƒãƒ¼ãƒ«',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s91',name:'T100 Gold Coast',date:'2026-03-21',loc:'ã‚´ãƒ¼ãƒ«ãƒ‰ã‚³ãƒ¼ã‚¹ãƒˆ',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s92',name:'T100 San Francisco',date:'2026-05-30',loc:'ã‚µãƒ³ãƒ•ãƒ©ãƒ³ã‚·ã‚¹ã‚³',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s93',name:'T100 London',date:'2026-08-02',loc:'ãƒ­ãƒ³ãƒ‰ãƒ³',country:'ã‚¤ã‚®ãƒªã‚¹',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s94',name:'T100 Las Vegas',date:'2026-10-25',loc:'ãƒ©ã‚¹ãƒ™ã‚¬ã‚¹',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s95',name:'T100 Saudi Arabia',date:'2026-11-01',loc:'ã‚µã‚¦ã‚¸ã‚¢ãƒ©ãƒ“ã‚¢',country:'ã‚µã‚¦ã‚¸ã‚¢ãƒ©ãƒ“ã‚¢',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s96',name:'T100 Dubai',date:'2026-11-13',loc:'ãƒ‰ãƒã‚¤',country:'UAE',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    {id:'s97',name:'T100 Finals Qatar',date:'2026-12-11',loc:'ãƒ‰ãƒ¼ãƒ',country:'ã‚«ã‚¿ãƒ¼ãƒ«',dist:'ãƒŸãƒ‰ãƒ«',cat:'T100',url:'https://t100triathlon.com/'},
    // XTERRA / World Triathlon
    {id:'s100',name:'XTERRA Philippines',date:'2026-02-22',loc:'ã‚¹ãƒ¼ãƒ“ãƒƒã‚¯',country:'ãƒ•ã‚£ãƒªãƒ”ãƒ³',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA',url:'https://www.xterraplanet.com/'},
    {id:'s101',name:'XTERRA Asia-Pacific Championship',date:'2026-03-28',loc:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',country:'ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA',url:'https://www.xterraplanet.com/'},
    {id:'s102',name:'XTERRA Czech',date:'2026-06-20',loc:'ãƒã‚§ã‚³',country:'ãƒã‚§ã‚³',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA EU',url:'https://www.xterraplanet.com/'},
    {id:'s103',name:'XTERRA Germany',date:'2026-08-08',loc:'ãƒ‰ã‚¤ãƒ„',country:'ãƒ‰ã‚¤ãƒ„',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA EU',url:'https://www.xterraplanet.com/'},
    {id:'s104',name:'XTERRA World Championship',date:'2026-10-25',loc:'ãƒã‚¦ã‚¤',country:'ã‚¢ãƒ¡ãƒªã‚«',dist:'ã‚ªãƒ•ãƒ­ãƒ¼ãƒ‰',cat:'XTERRA WC',url:'https://www.xterraplanet.com/'},
    {id:'s105',name:'WTã‚¨ã‚¤ã‚¸ã‚°ãƒ«ãƒ¼ãƒ—ä¸–ç•Œé¸æ‰‹æ¨©ãƒãƒ³ãƒ†ãƒ™ãƒ‰ãƒ©',date:'2026-09-24',loc:'ãƒãƒ³ãƒ†ãƒ™ãƒ‰ãƒ©',country:'ã‚¹ãƒšã‚¤ãƒ³',dist:'ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰',cat:'WT World',url:'https://triathlon.org/'},
    {id:'s106',name:'WTãƒãƒ«ãƒã‚¹ãƒãƒ¼ãƒ„ä¸–ç•Œé¸æ‰‹æ¨©ã‚¢ãƒ–ãƒ€ãƒ“',date:'2026-11-13',loc:'ã‚¢ãƒ–ãƒ€ãƒ“',country:'UAE',dist:'ãã®ä»–',cat:'WT World',url:'https://triathlon.org/'},
];

let races = [];
let filtered = [];
let selected = {a: new Set(), o: new Set()};
const CACHE_KEY = 'races_cache_v3';
const CACHE_DURATION = 3600000; // 1æ™‚é–“

async function init() {
    // ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    const cached = localStorage.getItem(CACHE_KEY);
    if (cached) {
        try {
            const data = JSON.parse(cached);
            if (Date.now() - new Date(data.lastUpdated).getTime() < CACHE_DURATION) {
                races = data.races;
                updateUI(data);
                hideLoading();
                return;
            }
        } catch (e) {}
    }
    await fetchData();
}

async function fetchData() {
    showLoading();
    try {
        const response = await fetch('/.netlify/functions/fetch-races', { timeout: 30000 });
        if (!response.ok) throw new Error('API error');
        const data = await response.json();
        
        if (data.success && data.races && data.races.length > 0) {
            races = data.races;
            localStorage.setItem(CACHE_KEY, JSON.stringify(data));
            updateUI(data);
            
            if (data.scrapingSuccess) {
                setStatus('success', `âœ… JTUã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾— (${data.count}ä»¶)`);
            } else if (data.fallback) {
                setStatus('warning', `âš ï¸ APIã‚¨ãƒ©ãƒ¼ - é™çš„ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ (${data.count}ä»¶)`);
            } else {
                setStatus('warning', `âš ï¸ ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ä¸€éƒ¨å¤±æ•— - é™çš„ãƒ‡ãƒ¼ã‚¿ã§è£œå®Œ (${data.count}ä»¶)`);
            }
        } else {
            throw new Error('No data');
        }
    } catch (error) {
        console.error('Fetch error:', error);
        // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: é™çš„ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨
        races = STATIC_RACES.filter(r => r.date >= new Date().toISOString().split('T')[0]);
        races.sort((a, b) => a.date.localeCompare(b.date));
        
        const jp = races.filter(r => r.country === 'æ—¥æœ¬').length;
        const ov = races.length - jp;
        
        updateUI({
            count: races.length,
            japanCount: jp,
            overseasCount: ov,
            lastUpdated: new Date().toISOString()
        });
        setStatus('error', `âš ï¸ ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰ - é™çš„ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ (${races.length}ä»¶)`);
    }
    hideLoading();
}

function refreshData() {
    localStorage.removeItem(CACHE_KEY);
    fetchData();
}

function updateUI(data) {
    document.getElementById('total-count').textContent = data.count;
    document.getElementById('japan-count').textContent = data.japanCount;
    document.getElementById('overseas-count').textContent = data.overseasCount;
    document.getElementById('last-updated').textContent = new Date(data.lastUpdated).toLocaleString('ja-JP');
    filter();
}

function setStatus(type, text) {
    const bar = document.getElementById('status-bar');
    bar.className = 'status-bar' + (type !== 'success' ? ' ' + type : '');
    document.getElementById('status-text').textContent = text;
}

function showLoading() { document.getElementById('loading').style.display = 'flex'; document.getElementById('refresh-btn').disabled = true; }
function hideLoading() { document.getElementById('loading').style.display = 'none'; document.getElementById('refresh-btn').disabled = false; }

function filter() {
    const s = document.getElementById('f-search').value.toLowerCase();
    const r = document.getElementById('f-region').value;
    const d = document.getElementById('f-dist').value;
    const m = document.getElementById('f-month').value;
    
    filtered = races.filter(x => {
        if (s && !x.name.toLowerCase().includes(s) && !(x.loc||'').toLowerCase().includes(s)) return false;
        if (r === 'japan' && x.country !== 'æ—¥æœ¬') return false;
        if (r === 'overseas' && x.country === 'æ—¥æœ¬') return false;
        if (d && x.dist !== d) return false;
        if (m && x.date.substring(5,7) !== m) return false;
        return true;
    });
    filtered.sort((a,b) => a.date.localeCompare(b.date));
    document.getElementById('filtered-count').textContent = filtered.length;
    document.getElementById('result-count').textContent = filtered.length + 'ä»¶';
    render();
}

function render() {
    const c = document.getElementById('races');
    if (!filtered.length) { c.innerHTML = '<div class="empty">è©²å½“ã™ã‚‹å¤§ä¼šãŒã‚ã‚Šã¾ã›ã‚“</div>'; return; }
    c.innerHTML = filtered.map(r => {
        const isA = selected.a.has(r.id), isO = selected.o.has(r.id);
        const cls = isA ? 'table-row sel-a' : isO ? 'table-row sel-o' : 'table-row';
        const dt = new Date(r.date);
        const ds = `${dt.getFullYear()}/${dt.getMonth()+1}/${dt.getDate()}`;
        const loc = (r.loc || '') + (r.country && r.country !== 'æ—¥æœ¬' ? ' (' + r.country + ')' : '');
        return `<div class="${cls}">
            <div class="sel-radios">
                <label><input type="radio" name="s${r.id}" ${isA?'checked':''} onchange="sel('${r.id}','a')">A</label>
                <label><input type="radio" name="s${r.id}" ${isO?'checked':''} onchange="sel('${r.id}','o')">ä»–</label>
            </div>
            <div class="race-date">${ds}</div>
            <a href="${r.url}" target="_blank" class="race-name" title="${r.name}">${r.name}</a>
            <div class="race-loc" title="${loc}">${loc}</div>
            <div class="race-dist">${r.dist}</div>
            <div class="race-cat" title="${r.cat||''}">${r.cat||''}</div>
        </div>`;
    }).join('');
}

function sel(id, type) {
    selected.a.delete(id); selected.o.delete(id);
    if (type === 'a') selected.a.add(id);
    else selected.o.add(id);
    updateSel();
    render();
}

function updateSel() {
    const t = selected.a.size + selected.o.size;
    document.getElementById('a-count').textContent = selected.a.size;
    document.getElementById('o-count').textContent = selected.o.size;
    const btn = document.getElementById('goal-btn');
    btn.disabled = t === 0;
    btn.textContent = t > 0 ? `ç›®æ¨™è¨­å®šã¸ (${t}ä»¶) â†’` : 'ç›®æ¨™è¨­å®šã¸ â†’';
}

function goToGoal() {
    const data = {a: [...selected.a], o: [...selected.o], details: {}};
    [...selected.a, ...selected.o].forEach(id => {
        const r = races.find(x => x.id === id);
        if (r) data.details[id] = r;
    });
    localStorage.setItem('selected_races', JSON.stringify(data));
    window.location.href = 'goal-setting.html';
}

document.getElementById('f-search').addEventListener('input', filter);
document.getElementById('f-region').addEventListener('change', filter);
document.getElementById('f-dist').addEventListener('change', filter);
document.getElementById('f-month').addEventListener('change', filter);
document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>
